<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>meshed.dag &mdash; meshed 0.1.48 documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/toggleprompt.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="meshed.examples.online_marketing" href="examples/online_marketing.html" />
    <link rel="prev" title="meshed.composition" href="composition.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> meshed
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../meshed.html">meshed</a></li>
<li class="toctree-l1"><a class="reference internal" href="base.html">meshed.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">meshed.caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="composition.html">meshed.composition</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">meshed.dag</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#faq-and-troubleshooting">FAQ and Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dags-and-pipelines">DAGs and Pipelines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples/online_marketing.html">meshed.examples.online_marketing</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/price_elasticity.html">meshed.examples.price_elasticity</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/vaccine_vs_no_vaccine.html">meshed.examples.vaccine_vs_no_vaccine</a></li>
<li class="toctree-l1"><a class="reference internal" href="ext.html">meshed.ext</a></li>
<li class="toctree-l1"><a class="reference internal" href="ext/gk.html">meshed.ext.gk</a></li>
<li class="toctree-l1"><a class="reference internal" href="ext/gk_tests.html">meshed.ext.gk_tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="itools.html">meshed.itools</a></li>
<li class="toctree-l1"><a class="reference internal" href="makers.html">meshed.makers</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap.html">meshed.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/dask_graph_language.html">meshed.scrap.dask_graph_language</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/gk_with_networkx.html">meshed.scrap.gk_with_networkx</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/misc_utils.html">meshed.scrap.misc_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/wrapping_dags.html">meshed.scrap.wrapping_dags</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">meshed.tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_composition.html">meshed.tests.test_composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_dag.html">meshed.tests.test_dag</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_dag_2.html">meshed.tests.test_dag_2</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_getitem.html">meshed.tests.test_getitem</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_itools.html">meshed.tests.test_itools</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_makers.html">meshed.tests.test_makers</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_util.html">meshed.tests.test_util</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/utils_for_testing.html">meshed.tests.utils_for_testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">meshed.util</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">meshed</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>meshed.dag</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/module_docs/meshed/dag.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-meshed.dag">
<span id="meshed-dag"></span><h1>meshed.dag<a class="headerlink" href="#module-meshed.dag" title="Permalink to this headline">¶</a></h1>
<p>Making DAGs</p>
<p>In it’s simplest form, consider this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">meshed</span> <span class="kn">import</span> <span class="n">DAG</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">this</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">that</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">b</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">combine</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">((</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">,</span> <span class="n">combine</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dag</span><span class="o">.</span><span class="n">synopsis_string</span><span class="p">())</span>
<span class="go">x,b -&gt; that_ -&gt; that</span>
<span class="go">a,b -&gt; this_ -&gt; this</span>
<span class="go">this,that -&gt; combine_ -&gt; combine</span>
</pre></div>
</div>
<p>But don’t be fooled: There’s much more to it!</p>
<section id="faq-and-troubleshooting">
<h2>FAQ and Troubleshooting<a class="headerlink" href="#faq-and-troubleshooting" title="Permalink to this headline">¶</a></h2>
<section id="dags-and-pipelines">
<h3>DAGs and Pipelines<a class="headerlink" href="#dags-and-pipelines" title="Permalink to this headline">¶</a></h3>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">meshed</span> <span class="kn">import</span> <span class="n">DAG</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">chunker</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">chk_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="nb">iter</span><span class="p">(</span><span class="n">sequence</span><span class="p">)]</span> <span class="o">*</span> <span class="n">chk_size</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_chunker</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">chunker</span><span class="p">,</span> <span class="n">chk_size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vec</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>  <span class="c1"># when appropriate, use easier to read sequences</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">my_chunker</span><span class="p">(</span><span class="n">vec</span><span class="p">))</span>
<span class="go">[(0, 1, 2), (3, 4, 5)]</span>
</pre></div>
</div>
<p>Oh, that’s just a <code class="docutils literal notranslate"><span class="pre">my_chunker</span> <span class="pre">-&gt;</span> <span class="pre">list</span></code> pipeline!
A pipeline is a subset of DAG, so let me do this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">([</span><span class="n">my_chunker</span><span class="p">,</span> <span class="nb">list</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">missing a required argument: &#39;sequence&#39;</span>
</pre></div>
</div>
<p>What happened here?
You’re assuming that saying <code class="docutils literal notranslate"><span class="pre">[my_chunker,</span> <span class="pre">list]</span></code> is enough for DAG to know that
what you meant is for <code class="docutils literal notranslate"><span class="pre">my_chunker</span></code> to feed it’s input to <code class="docutils literal notranslate"><span class="pre">list</span></code>.
Sure, DAG has enough information to do so, but the default connection policy doesn’t
assume that it’s a pipeline you want to make.
In fact, the order you specify the functions doesn’t have an affect on the connections
with the default connection policy.</p>
<p>See what the signature of <code class="docutils literal notranslate"><span class="pre">dag</span></code> is:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">dag</span><span class="p">))</span>
<span class="go">&#39;(iterable=(), /, sequence, *, chk_size: int = 3)&#39;</span>
</pre></div>
</div>
<p>So dag actually works just fine. Here’s the proof:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">vec</span><span class="p">)</span>  
<span class="go">([1, 2, 3], &lt;zip object at 0x104d7f080&gt;)</span>
</pre></div>
</div>
<p>It’s just not what you might have intended.</p>
<p>Your best bet to get what you intended is to be explicit.</p>
<p>The way to be explicit is to not specify functions alone, but <code class="docutils literal notranslate"><span class="pre">FuncNodes</span></code> that
wrap them, along with the specification
the <code class="docutils literal notranslate"><span class="pre">name</span></code> the function will be referred to by,
the names that it’s parameters should <code class="docutils literal notranslate"><span class="pre">bind</span></code> to (that is, where the function
will get it’s import arguments from), and
the <code class="docutils literal notranslate"><span class="pre">out</span></code> name of where it should be it’s output.</p>
<p>In the current case a fully specified DAG would look something like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">meshed</span> <span class="kn">import</span> <span class="n">FuncNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span>
<span class="gp">... </span>        <span class="n">FuncNode</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">func</span><span class="o">=</span><span class="n">my_chunker</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s1">&#39;chunker&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">bind</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">sequence</span><span class="o">=</span><span class="s1">&#39;sequence&#39;</span><span class="p">,</span> <span class="n">chk_size</span><span class="o">=</span><span class="s1">&#39;chk_size&#39;</span><span class="p">),</span>
<span class="gp">... </span>            <span class="n">out</span><span class="o">=</span><span class="s1">&#39;chks&#39;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">FuncNode</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">func</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s1">&#39;gather_chks_into_list&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">bind</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">iterable</span><span class="o">=</span><span class="s1">&#39;chks&#39;</span><span class="p">),</span>
<span class="gp">... </span>            <span class="n">out</span><span class="o">=</span><span class="s1">&#39;list_of_chks&#39;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">dag</span><span class="p">(</span><span class="n">vec</span><span class="p">))</span>
<span class="go">[(0, 1, 2), (3, 4, 5)]</span>
</pre></div>
</div>
<p>But really, if you didn’t care about the names of things,
all you need in this case was to make sure that the output of <code class="docutils literal notranslate"><span class="pre">my_chunker</span></code> was
fed to <code class="docutils literal notranslate"><span class="pre">list</span></code>, and therefore the following was sufficient:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">([</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">my_chunker</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="s1">&#39;chks&#39;</span><span class="p">),</span>  <span class="c1"># call the output of chunker &quot;chks&quot;</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">bind</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">iterable</span><span class="o">=</span><span class="s1">&#39;chks&#39;</span><span class="p">))</span>  <span class="c1"># source list input from &quot;chks&quot;</span>
<span class="gp">... </span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">dag</span><span class="p">(</span><span class="n">vec</span><span class="p">))</span>
<span class="go">[(0, 1, 2), (3, 4, 5)]</span>
</pre></div>
</div>
<p>Connection policies are very useful when you want to define ways for DAG to
“just figure it out” for you.
That is, you want to tell the machine to adapt to your thoughts, not vice versa.
We support such technological expectations!
The default connection policy is there to provide one such ways, but
by all means, use another!</p>
<p>Does this mean that connection policies are not for production code?
Well, it depends. The Zen of Python (<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">this</span></code>)
states “explicit is better than implicit”, and indeed it’s often
a good fallback rule.
But defining components and the way they should be assembled can go a long way
in achieving consistency, separation of concerns, adaptability, and flexibility.
All quite useful things. Also in production. Especially in production.
That said it is your responsiblity to use the right policy for your particular context.</p>
<dl class="py class">
<dt id="meshed.dag.DAG">
<em class="property">class </em><code class="sig-prename descclassname">meshed.dag.</code><code class="sig-name descname">DAG</code><span class="sig-paren">(</span><em class="sig-param">func_nodes: Iterable[Union[meshed.base.FuncNode, Callable]], cache_last_scope: bool = True, parameter_merge: Callable[[Iterable[inspect.Parameter]], inspect.Parameter] = &lt;function conservative_parameter_merge&gt;, new_scope: Callable = &lt;class 'dict'&gt;, name: str = None, extract_output_from_scope: Callable[[dict, Iterable[str]], Any] = &lt;function extract_values&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#DAG"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.DAG" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">meshed.dag</span> <span class="kn">import</span> <span class="n">DAG</span><span class="p">,</span> <span class="n">Sig</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">this</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">that</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">combine</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">((</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">,</span> <span class="n">combine</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dag</span><span class="o">.</span><span class="n">synopsis_string</span><span class="p">())</span>
<span class="go">x,b -&gt; that_ -&gt; that</span>
<span class="go">a,b -&gt; this_ -&gt; this</span>
<span class="go">this,that -&gt; combine_ -&gt; combine</span>
</pre></div>
</div>
<p>But what does it do?</p>
<p>It’s a callable, with a signature:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Sig</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span>  
<span class="go">&lt;Sig (x, a, b=1)&gt;</span>
</pre></div>
</div>
<p>And when you call it, it executes the dag from the root values you give it and
returns the leaf output values.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># (a+b,x*b) == (2+3,1*3) == (5, 3)</span>
<span class="go">(5, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># (a+b,x*b) == (2+1,1*1) == (3, 1)</span>
<span class="go">(3, 1)</span>
</pre></div>
</div>
<p>The above DAG was created straight from the functions, using only the names of the
functions and their arguments to define how to hook the network up.</p>
<p>But if you didn’t write those functions specifically for that purpose, or you want
to use someone else’s functions, we got you covered.</p>
<p>You can define the name of the node (the <cite>name</cite> argument), the name of the output
(the <cite>out</cite> argument) and a mapping from the function’s arguments names to
“network names” (through the <cite>bind</cite> argument).
The edges of the DAG are defined by matching <cite>out</cite> TO <cite>bind</cite>.</p>
<dl class="py method">
<dt id="meshed.dag.DAG.call_on_scope">
<code class="sig-name descname">call_on_scope</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scope</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#DAG.call_on_scope"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.DAG.call_on_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the func_nodes using scope (a dict or MutableMapping) both to
source it’s arguments and write it’s results.</p>
<p>Note: This method is only meant to be used as a backend to __call__, not as
an actual interface method. Additional control/constraints on read and writes
can be implemented by providing a custom scope for that. For example, one could
log read and/or writes to specific keys, or disallow overwriting to an existing
key (useful for pipeline sanity), etc.</p>
</dd></dl>

<dl class="py method">
<dt id="meshed.dag.DAG.dot_digraph">
<code class="sig-name descname">dot_digraph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_lines</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#DAG.dot_digraph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.DAG.dot_digraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Make lines for dot (graphviz) specification of DAG</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mult</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">exp</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span> <span class="k">return</span> <span class="n">mult</span> <span class="o">**</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_nodes</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">FuncNode</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;the_product&#39;</span><span class="p">),</span> <span class="n">FuncNode</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
<span class="gp">... </span><span class="p">]</span>
</pre></div>
</div>
<p>#
# &gt;&gt;&gt; assert list(DAG(func_nodes).dot_digraph_body()) == [
# ]</p>
</dd></dl>

<dl class="py method">
<dt id="meshed.dag.DAG.dot_digraph_ascii">
<code class="sig-name descname">dot_digraph_ascii</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_lines</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#DAG.dot_digraph_ascii"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.DAG.dot_digraph_ascii" title="Permalink to this definition">¶</a></dt>
<dd><p>Make lines for dot (graphviz) specification of DAG</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mult</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">exp</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span> <span class="k">return</span> <span class="n">mult</span> <span class="o">**</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_nodes</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">FuncNode</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;the_product&#39;</span><span class="p">),</span> <span class="n">FuncNode</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
<span class="gp">... </span><span class="p">]</span>
</pre></div>
</div>
<p>#
# &gt;&gt;&gt; assert list(DAG(func_nodes).dot_digraph_body()) == [
# ]</p>
</dd></dl>

<dl class="py method">
<dt id="meshed.dag.DAG.dot_digraph_body">
<code class="sig-name descname">dot_digraph_body</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_lines</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#DAG.dot_digraph_body"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.DAG.dot_digraph_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Make lines for dot (graphviz) specification of DAG</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mult</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">exp</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span> <span class="k">return</span> <span class="n">mult</span> <span class="o">**</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_nodes</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">FuncNode</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;the_product&#39;</span><span class="p">),</span> <span class="n">FuncNode</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
<span class="gp">... </span><span class="p">]</span>
</pre></div>
</div>
<p>#
# &gt;&gt;&gt; assert list(DAG(func_nodes).dot_digraph_body()) == [
# ]</p>
</dd></dl>

<dl class="py method">
<dt id="meshed.dag.DAG.extract_output_from_scope">
<code class="sig-name descname">extract_output_from_scope</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Iterable</span></em><span class="sig-paren">)</span><a class="headerlink" href="#meshed.dag.DAG.extract_output_from_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract values from dict <code class="docutils literal notranslate"><span class="pre">d</span></code>, returning them:</p>
<ul class="simple">
<li><p>as a tuple if len(keys) &gt; 1</p></li>
<li><p>a single value if len(keys) == 1</p></li>
<li><p>None if not</p></li>
</ul>
<p>This is used as the default extractor in DAG</p>
</dd></dl>

<dl class="py attribute">
<dt id="meshed.dag.DAG.new_scope">
<code class="sig-name descname">new_scope</code><a class="headerlink" href="#meshed.dag.DAG.new_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">builtins.dict</span></code></p>
</dd></dl>

<dl class="py method">
<dt id="meshed.dag.DAG.parameter_merge">
<code class="sig-name descname">parameter_merge</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">same_kind</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">same_default</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">same_annotation</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#meshed.dag.DAG.parameter_merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates that all the params are exactly the same, returning the first if so.</p>
<p>This is used when hooking up functions that use the same parameters (i.e. arg
names). When the name of an argument is used more than once, which kind, default,
and annotation should be used in the interface of the DAG?</p>
<p>If they’re all the same, there’s no problem.</p>
<p>But if they’re not the same, we need to provide control on which to ignore.</p>
</dd></dl>

<dl class="py method">
<dt id="meshed.dag.DAG.params_for_src">
<em class="property">property </em><code class="sig-name descname">params_for_src</code><a class="headerlink" href="#meshed.dag.DAG.params_for_src" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">{src_name:</span> <span class="pre">list_of_params_using_that_src,...}</span></code> dictionary.
That is, a <code class="docutils literal notranslate"><span class="pre">dict</span></code> having lists of all <code class="docutils literal notranslate"><span class="pre">Parameter</span></code> objs that are used by a
<code class="docutils literal notranslate"><span class="pre">node.bind</span></code> source (value of <code class="docutils literal notranslate"><span class="pre">node.bind</span></code>) for each such source in the graph</p>
<p>For each <code class="docutils literal notranslate"><span class="pre">func_node</span></code>, <code class="docutils literal notranslate"><span class="pre">func_node.bind</span></code> gives us the
<code class="docutils literal notranslate"><span class="pre">{param:</span> <span class="pre">varnode_src_name}</span></code> specification that tells us where (key of scope)
to source the arguments of the <code class="docutils literal notranslate"><span class="pre">func_node.func</span></code> for each <code class="docutils literal notranslate"><span class="pre">param</span></code> of that
function.</p>
<p>What <code class="docutils literal notranslate"><span class="pre">params_for_src</span></code> is, is the corresponding inverse map.
The <code class="docutils literal notranslate"><span class="pre">{varnode_src_name:</span> <span class="pre">list_of_params}</span></code> gathered by scanning each
<code class="docutils literal notranslate"><span class="pre">func_node</span></code> of the DAG.</p>
</dd></dl>

<dl class="py method">
<dt id="meshed.dag.DAG.partial">
<code class="sig-name descname">partial</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">positional_dflts</span></em>, <em class="sig-param"><span class="n">_remove_bound_arguments</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">_consider_defaulted_arguments_as_bound</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">keyword_dflts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#DAG.partial"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.DAG.partial" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a curried version of the DAG.</p>
<p>Like <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code>, but returns a DAG (not just a callable) and allows
you to remove bound arguments as well as roll in orphaned_nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>positional_dflts</strong> – Bind arguments positionally</p></li>
<li><p><strong>keyword_dflts</strong> – Bind arguments through their names</p></li>
<li><p><strong>_remove_bound_arguments</strong> – False – set to True if you don’t want bound
arguments to show up in the signature.</p></li>
<li><p><strong>_consider_defaulted_arguments_as_bound</strong> – False – set to True if
you want to also consider arguments that already had defaults as bound
(and be removed).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">c</span> <span class="o">*</span> <span class="n">d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">g</span> <span class="o">-</span> <span class="n">f</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">([</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">h</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">dag</span><span class="p">))</span>
<span class="go">&#39;(c, a, b, d=4)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>  <span class="c1"># == (3 * 4) - (1 + 2) == 12 - 3 == 9</span>
<span class="go">9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># same as above</span>
<span class="go">9</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_dag</span> <span class="o">=</span> <span class="n">dag</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">new_dag</span><span class="p">,</span> <span class="n">DAG</span><span class="p">)</span>  <span class="c1"># it&#39;s a dag (not just a partialized callable!)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">new_dag</span><span class="p">))</span>
<span class="go">&#39;(a, b, c=3, d=4)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_dag</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># same as dag(c=3, a=1, b=2, d=4), so:</span>
<span class="go">9</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="meshed.dag.conservative_parameter_merge">
<code class="sig-prename descclassname">meshed.dag.</code><code class="sig-name descname">conservative_parameter_merge</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">same_kind</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">same_default</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">same_annotation</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#conservative_parameter_merge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.conservative_parameter_merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates that all the params are exactly the same, returning the first if so.</p>
<p>This is used when hooking up functions that use the same parameters (i.e. arg
names). When the name of an argument is used more than once, which kind, default,
and annotation should be used in the interface of the DAG?</p>
<p>If they’re all the same, there’s no problem.</p>
<p>But if they’re not the same, we need to provide control on which to ignore.</p>
</dd></dl>

<dl class="py function">
<dt id="meshed.dag.dot_lines_of_func_nodes">
<code class="sig-prename descclassname">meshed.dag.</code><code class="sig-name descname">dot_lines_of_func_nodes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func_nodes</span><span class="p">:</span> <span class="n">Iterable<span class="p">[</span><a class="reference internal" href="base.html#meshed.base.FuncNode" title="meshed.base.FuncNode">meshed.base.FuncNode</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">start_lines</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#dot_lines_of_func_nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.dot_lines_of_func_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Got lines generator for the graphviz.DiGraph(body=list(…))</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mult</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">exp</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">mult</span> <span class="o">**</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_nodes</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;the_product&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dot_lines_of_func_nodes</span><span class="p">(</span><span class="n">func_nodes</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">lines</span> <span class="o">==</span> <span class="p">[</span>
<span class="gp">... </span><span class="s1">&#39;x [label=&quot;x&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;_add [label=&quot;_add&quot; shape=&quot;box&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;_add -&gt; x&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;a [label=&quot;a&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;b [label=&quot;b=&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;a -&gt; _add&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;b -&gt; _add&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;mult [label=&quot;mult&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;the_product [label=&quot;the_product&quot; shape=&quot;box&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;the_product -&gt; mult&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;x [label=&quot;x&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;y [label=&quot;y=&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;x -&gt; the_product&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;y -&gt; the_product&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;exp [label=&quot;exp&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;_exp [label=&quot;_exp&quot; shape=&quot;box&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;_exp -&gt; exp&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;mult [label=&quot;mult&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;a [label=&quot;a&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;mult -&gt; _exp&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;a -&gt; _exp&#39;</span>
<span class="gp">... </span><span class="p">]</span>  
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">meshed.util</span> <span class="kn">import</span> <span class="n">dot_to_ascii</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dot_to_ascii</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)))</span>  

<span class="go">                a        ─┐</span>
<span class="go">                          │</span>
<span class="go">           │              │</span>
<span class="go">           │              │</span>
<span class="go">           ▼              │</span>
<span class="go">         ┌─────────────┐  │</span>
<span class="go"> b=  ──▶ │    _add     │  │</span>
<span class="go">         └─────────────┘  │</span>
<span class="go">           │              │</span>
<span class="go">           │              │</span>
<span class="go">           ▼              │</span>
<span class="go">                          │</span>
<span class="go">                x         │</span>
<span class="go">                          │</span>
<span class="go">           │              │</span>
<span class="go">           │              │</span>
<span class="go">           ▼              │</span>
<span class="go">         ┌─────────────┐  │</span>
<span class="go"> y=  ──▶ │ the_product │  │</span>
<span class="go">         └─────────────┘  │</span>
<span class="go">           │              │</span>
<span class="go">           │              │</span>
<span class="go">           ▼              │</span>
<span class="go">                          │</span>
<span class="go">              mult        │</span>
<span class="go">                          │</span>
<span class="go">           │              │</span>
<span class="go">           │              │</span>
<span class="go">           ▼              │</span>
<span class="go">         ┌─────────────┐  │</span>
<span class="go">         │    _exp     │ ◀┘</span>
<span class="go">         └─────────────┘</span>
<span class="go">           │</span>
<span class="go">           │</span>
<span class="go">           ▼</span>

<span class="go">               exp</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="meshed.dag.extract_items">
<code class="sig-prename descclassname">meshed.dag.</code><code class="sig-name descname">extract_items</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Iterable</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#extract_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.extract_items" title="Permalink to this definition">¶</a></dt>
<dd><p>generator of (k, v) pairs extracted from d for keys</p>
</dd></dl>

<dl class="py function">
<dt id="meshed.dag.extract_values">
<code class="sig-prename descclassname">meshed.dag.</code><code class="sig-name descname">extract_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Iterable</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#extract_values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.extract_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract values from dict <code class="docutils literal notranslate"><span class="pre">d</span></code>, returning them:</p>
<ul class="simple">
<li><p>as a tuple if len(keys) &gt; 1</p></li>
<li><p>a single value if len(keys) == 1</p></li>
<li><p>None if not</p></li>
</ul>
<p>This is used as the default extractor in DAG</p>
</dd></dl>

<dl class="py function">
<dt id="meshed.dag.funcs_to_operations">
<code class="sig-prename descclassname">meshed.dag.</code><code class="sig-name descname">funcs_to_operations</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">funcs</span></em>, <em class="sig-param"><span class="n">exclude_names</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="ext/gk.html#meshed.ext.gk.Operation" title="meshed.ext.gk.Operation">meshed.ext.gk.Operation</a><a class="reference internal" href="../../_modules/meshed/dag.html#funcs_to_operations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.funcs_to_operations" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an operation from a callable</p>
</dd></dl>

<dl class="py function">
<dt id="meshed.dag.funcs_to_operators">
<code class="sig-prename descclassname">meshed.dag.</code><code class="sig-name descname">funcs_to_operators</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">funcs</span></em>, <em class="sig-param"><span class="n">exclude_names</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="ext/gk.html#meshed.ext.gk.Operation" title="meshed.ext.gk.Operation">meshed.ext.gk.Operation</a><a class="reference internal" href="../../_modules/meshed/dag.html#funcs_to_operators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.funcs_to_operators" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an operation from a callable</p>
</dd></dl>

<dl class="py function">
<dt id="meshed.dag.hook_up">
<code class="sig-prename descclassname">meshed.dag.</code><code class="sig-name descname">hook_up</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">variables</span><span class="p">:</span> <span class="n">MutableMapping</span></em>, <em class="sig-param"><span class="n">output_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#hook_up"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.hook_up" title="Permalink to this definition">¶</a></dt>
<dd><p>Source inputs and write outputs to given variables mapping.</p>
<p>Returns inputless and outputless function that will, when called,
get relevant inputs from the provided variables mapping and write it’s
output there as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>variables</strong> – The MutableMapping (like… a dict) where the function</p>
</dd>
</dl>
<p>should both read it’s input and write it’s output.
:param output_name: The key of the variables mapping that should be used
to write the output of the function
:return: A function</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">formula1</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">((</span><span class="n">w</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span> <span class="o">**</span> <span class="n">z</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">hook_up</span><span class="p">(</span><span class="n">formula1</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># NOTE: update d, not d = dict(...), which would make a DIFFERENT d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># not d = dict(w=2, x=3, y=4), which would</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that there’s no output. The output is in d
&gt;&gt;&gt; d
{‘w’: 2, ‘x’: 3, ‘y’: 4, ‘formula1’: 20}</p>
<p>Again…</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;formula1&#39;</span><span class="p">]</span>
<span class="go">9</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="meshed.dag.named_partial">
<code class="sig-prename descclassname">meshed.dag.</code><code class="sig-name descname">named_partial</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">__name__</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">keywords</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#named_partial"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meshed.dag.named_partial" title="Permalink to this definition">¶</a></dt>
<dd><p>functools.partial, but with a __name__</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">named_partial</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;print&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">named_partial</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="o">=</span><span class="s1">&#39;now_partial_has_a_name&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;now_partial_has_a_name&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="composition.html" class="btn btn-neutral float-left" title="meshed.composition" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples/online_marketing.html" class="btn btn-neutral float-right" title="meshed.examples.online_marketing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>