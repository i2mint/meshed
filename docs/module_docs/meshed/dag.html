<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>meshed.dag &mdash; meshed 0.1.25 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/toggleprompt.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="meshed.examples.online_marketing" href="examples/online_marketing.html" />
    <link rel="prev" title="meshed.caching" href="caching.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> meshed
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../meshed.html">meshed</a></li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">meshed.caching</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">meshed.dag</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#faq-and-troubleshooting">FAQ and Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dags-and-pipelines">DAGs and Pipelines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples/online_marketing.html">meshed.examples.online_marketing</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/price_elasticity.html">meshed.examples.price_elasticity</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/vaccine_vs_no_vaccine.html">meshed.examples.vaccine_vs_no_vaccine</a></li>
<li class="toctree-l1"><a class="reference internal" href="ext.html">meshed.ext</a></li>
<li class="toctree-l1"><a class="reference internal" href="ext/gk.html">meshed.ext.gk</a></li>
<li class="toctree-l1"><a class="reference internal" href="ext/gk_tests.html">meshed.ext.gk_tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="itools.html">meshed.itools</a></li>
<li class="toctree-l1"><a class="reference internal" href="makers.html">meshed.makers</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap.html">meshed.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/dask_graph_language.html">meshed.scrap.dask_graph_language</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/gk_with_networkx.html">meshed.scrap.gk_with_networkx</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/misc_utils.html">meshed.scrap.misc_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/wrapping_dags.html">meshed.scrap.wrapping_dags</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">meshed.tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_dag.html">meshed.tests.test_dag</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_dag_2.html">meshed.tests.test_dag_2</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_itools.html">meshed.tests.test_itools</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_makers.html">meshed.tests.test_makers</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_util.html">meshed.tests.test_util</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/utils_for_testing.html">meshed.tests.utils_for_testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">meshed.util</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">meshed</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>meshed.dag</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/module_docs/meshed/dag.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-meshed.dag">
<span id="meshed-dag"></span><h1>meshed.dag<a class="headerlink" href="#module-meshed.dag" title="Permalink to this headline"></a></h1>
<p>Making DAGs</p>
<p>In it’s simplest form, consider this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">meshed</span> <span class="kn">import</span> <span class="n">DAG</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">this</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">that</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">b</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">combine</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">((</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">,</span> <span class="n">combine</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dag</span><span class="o">.</span><span class="n">synopsis_string</span><span class="p">())</span>
<span class="go">x,b -&gt; that_ -&gt; that</span>
<span class="go">a,b -&gt; this_ -&gt; this</span>
<span class="go">this,that -&gt; combine_ -&gt; combine</span>
</pre></div>
</div>
<p>But don’t be fooled: There’s much more to it!</p>
<section id="faq-and-troubleshooting">
<h2>FAQ and Troubleshooting<a class="headerlink" href="#faq-and-troubleshooting" title="Permalink to this headline"></a></h2>
<section id="dags-and-pipelines">
<h3>DAGs and Pipelines<a class="headerlink" href="#dags-and-pipelines" title="Permalink to this headline"></a></h3>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">meshed</span> <span class="kn">import</span> <span class="n">DAG</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">chunker</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">chk_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="nb">iter</span><span class="p">(</span><span class="n">sequence</span><span class="p">)]</span> <span class="o">*</span> <span class="n">chk_size</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_chunker</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">chunker</span><span class="p">,</span> <span class="n">chk_size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vec</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>  <span class="c1"># when appropriate, use easier to read sequences</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">my_chunker</span><span class="p">(</span><span class="n">vec</span><span class="p">))</span>
<span class="go">[(0, 1, 2), (3, 4, 5)]</span>
</pre></div>
</div>
<p>Oh, that’s just a <code class="docutils literal notranslate"><span class="pre">my_chunker</span> <span class="pre">-&gt;</span> <span class="pre">list</span></code> pipeline!
A pipeline is a subset of DAG, so let me do this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">([</span><span class="n">my_chunker</span><span class="p">,</span> <span class="nb">list</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">missing a required argument: &#39;sequence&#39;</span>
</pre></div>
</div>
<p>What happened here?
You’re assuming that saying <code class="docutils literal notranslate"><span class="pre">[my_chunker,</span> <span class="pre">list]</span></code> is enough for DAG to know that
what you meant is for <code class="docutils literal notranslate"><span class="pre">my_chunker</span></code> to feed it’s input to <code class="docutils literal notranslate"><span class="pre">list</span></code>.
Sure, DAG has enough information to do so, but the default connection policy doesn’t
assume that it’s a pipeline you want to make.
In fact, the order you specify the functions doesn’t have an affect on the connections
with the default connection policy.</p>
<p>See what the signature of <code class="docutils literal notranslate"><span class="pre">dag</span></code> is:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">dag</span><span class="p">))</span>
<span class="go">&#39;(iterable=(), /, sequence, *, chk_size: int = 3)&#39;</span>
</pre></div>
</div>
<p>So dag actually works just fine. Here’s the proof:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">vec</span><span class="p">)</span>  
<span class="go">([1, 2, 3], &lt;zip object at 0x104d7f080&gt;)</span>
</pre></div>
</div>
<p>It’s just not what you might have intended.</p>
<p>Your best bet to get what you intended is to be explicit.</p>
<p>The way to be explicit is to not specify functions alone, but <code class="docutils literal notranslate"><span class="pre">FuncNodes</span></code> that
wrap them, along with the specification
the <code class="docutils literal notranslate"><span class="pre">name</span></code> the function will be referred to by,
the names that it’s parameters should <code class="docutils literal notranslate"><span class="pre">bind</span></code> to (that is, where the function
will get it’s import arguments from), and
the <code class="docutils literal notranslate"><span class="pre">out</span></code> name of where it should be it’s output.</p>
<p>In the current case a fully specified DAG would look something like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">meshed</span> <span class="kn">import</span> <span class="n">FuncNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span>
<span class="gp">... </span>        <span class="n">FuncNode</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">func</span><span class="o">=</span><span class="n">my_chunker</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s1">&#39;chunker&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">bind</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">sequence</span><span class="o">=</span><span class="s1">&#39;sequence&#39;</span><span class="p">,</span> <span class="n">chk_size</span><span class="o">=</span><span class="s1">&#39;chk_size&#39;</span><span class="p">),</span>
<span class="gp">... </span>            <span class="n">out</span><span class="o">=</span><span class="s1">&#39;chks&#39;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>        <span class="n">FuncNode</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">func</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">name</span><span class="o">=</span><span class="s1">&#39;gather_chks_into_list&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">bind</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">iterable</span><span class="o">=</span><span class="s1">&#39;chks&#39;</span><span class="p">),</span>
<span class="gp">... </span>            <span class="n">out</span><span class="o">=</span><span class="s1">&#39;list_of_chks&#39;</span>
<span class="gp">... </span>        <span class="p">),</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">dag</span><span class="p">(</span><span class="n">vec</span><span class="p">))</span>
<span class="go">[(0, 1, 2), (3, 4, 5)]</span>
</pre></div>
</div>
<p>But really, if you didn’t care about the names of things,
all you need in this case was to make sure that the output of <code class="docutils literal notranslate"><span class="pre">my_chunker</span></code> was
fed to <code class="docutils literal notranslate"><span class="pre">list</span></code>, and therefore the following was sufficient:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">([</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">my_chunker</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="s1">&#39;chks&#39;</span><span class="p">),</span>  <span class="c1"># call the output of chunker &quot;chks&quot;</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">bind</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">iterable</span><span class="o">=</span><span class="s1">&#39;chks&#39;</span><span class="p">))</span>  <span class="c1"># source list input from &quot;chks&quot;</span>
<span class="gp">... </span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">dag</span><span class="p">(</span><span class="n">vec</span><span class="p">))</span>
<span class="go">[(0, 1, 2), (3, 4, 5)]</span>
</pre></div>
</div>
<p>Connection policies are very useful when you want to define ways for DAG to
“just figure it out” for you.
That is, you want to tell the machine to adapt to your thoughts, not vice versa.
We support such technological expectations!
The default connection policy is there to provide one such ways, but
by all means, use another!</p>
<p>Does this mean that connection policies are not for production code?
Well, it depends. The Zen of Python (<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">this</span></code>)
states “explicit is better than implicit”, and indeed it’s often
a good fallback rule.
But defining components and the way they should be assembled can go a long way
in achieving consistency, separation of concerns, adaptability, and flexibility.
All quite useful things. Also in production. Especially in production.
That said it is your responsiblity to use the right policy for your particular context.</p>
<dl class="py class">
<dt class="sig sig-object py" id="meshed.dag.DAG">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">DAG</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">func_nodes:</span> <span class="pre">Iterable[Union[meshed.dag.FuncNode,</span> <span class="pre">Callable]],</span> <span class="pre">cache_last_scope:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">parameter_merge:</span> <span class="pre">Callable[[Iterable[inspect.Parameter]],</span> <span class="pre">inspect.Parameter]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">conservative_parameter_merge&gt;,</span> <span class="pre">new_scope:</span> <span class="pre">Callable</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'dict'&gt;,</span> <span class="pre">name:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">extract_output_from_scope:</span> <span class="pre">Callable[[dict,</span> <span class="pre">Iterable[str]],</span> <span class="pre">Any]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">extract_values&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#DAG"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.DAG" title="Permalink to this definition"></a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">meshed.dag</span> <span class="kn">import</span> <span class="n">DAG</span><span class="p">,</span> <span class="n">Sig</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">this</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">that</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">combine</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">((</span><span class="n">this</span><span class="p">,</span> <span class="n">that</span><span class="p">,</span> <span class="n">combine</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dag</span><span class="o">.</span><span class="n">synopsis_string</span><span class="p">())</span>
<span class="go">x,b -&gt; that_ -&gt; that</span>
<span class="go">a,b -&gt; this_ -&gt; this</span>
<span class="go">this,that -&gt; combine_ -&gt; combine</span>
</pre></div>
</div>
<p>But what does it do?</p>
<p>It’s a callable, with a signature:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Sig</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span>  
<span class="go">&lt;Sig (x, a, b=1)&gt;</span>
</pre></div>
</div>
<p>And when you call it, it executes the dag from the root values you give it and
returns the leaf output values.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># (a+b,x*b) == (2+3,1*3) == (5, 3)</span>
<span class="go">(5, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dag</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># (a+b,x*b) == (2+1,1*1) == (3, 1)</span>
<span class="go">(3, 1)</span>
</pre></div>
</div>
<p>The above DAG was created straight from the functions, using only the names of the
functions and their arguments to define how to hook the network up.</p>
<p>But if you didn’t write those functions specifically for that purpose, or you want
to use someone else’s functions, we got you covered.</p>
<p>You can define the name of the node (the <cite>name</cite> argument), the name of the output
(the <cite>out</cite> argument) and a mapping from the function’s arguments names to
“network names” (through the <cite>bind</cite> argument).
The edges of the DAG are defined by matching <cite>out</cite> TO <cite>bind</cite>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="meshed.dag.DAG.call_on_scope">
<span class="sig-name descname"><span class="pre">call_on_scope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#DAG.call_on_scope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.DAG.call_on_scope" title="Permalink to this definition"></a></dt>
<dd><p>Calls the func_nodes using scope (a dict or MutableMapping) both to
source it’s arguments and write it’s results.</p>
<p>Note: This method is only meant to be used as a backend to __call__, not as
an actual interface method. Additional control/constraints on read and writes
can be implemented by providing a custom scope for that. For example, one could
log read and/or writes to specific keys, or disallow overwriting to an existing
key (useful for pipeline sanity), etc.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="meshed.dag.DAG.extract_output_from_scope">
<span class="sig-name descname"><span class="pre">extract_output_from_scope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#meshed.dag.DAG.extract_output_from_scope" title="Permalink to this definition"></a></dt>
<dd><p>Extract values from dict <code class="docutils literal notranslate"><span class="pre">d</span></code>, returning them:</p>
<ul class="simple">
<li><p>as a tuple if len(keys) &gt; 1</p></li>
<li><p>a single value if len(keys) == 1</p></li>
<li><p>None if not</p></li>
</ul>
<p>This is used as the default extractor in DAG</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="meshed.dag.DAG.new_scope">
<span class="sig-name descname"><span class="pre">new_scope</span></span><a class="headerlink" href="#meshed.dag.DAG.new_scope" title="Permalink to this definition"></a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="meshed.dag.DAG.parameter_merge">
<span class="sig-name descname"><span class="pre">parameter_merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">same_kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_annotation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#meshed.dag.DAG.parameter_merge" title="Permalink to this definition"></a></dt>
<dd><p>Validates that all the params are exactly the same, returning the first if so.</p>
<p>This is used when hooking up functions that use the same parameters (i.e. arg
names). When the name of an argument is used more than once, which kind, default,
and annotation should be used in the interface of the DAG?</p>
<p>If they’re all the same, there’s no problem.</p>
<p>But if they’re not the same, we need to provide control on which to ignore.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="meshed.dag.DAG.params_for_src">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">params_for_src</span></span><a class="headerlink" href="#meshed.dag.DAG.params_for_src" title="Permalink to this definition"></a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">{src_name:</span> <span class="pre">list_of_params_using_that_src,...}</span></code> dict.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="meshed.dag.FuncNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">FuncNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func:</span> <span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_output_into_scope:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names_maker:</span> <span class="pre">Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">underscore_func_node_names_maker&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_validator:</span> <span class="pre">Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">basic_node_validator&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#FuncNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.FuncNode" title="Permalink to this definition"></a></dt>
<dd><p>A function wrapper that makes the function amenable to operating in a network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – Function to wrap</p></li>
<li><p><strong>name</strong> – The name to associate to the function</p></li>
<li><p><strong>bind</strong> – The {func_argname: external_name,…} mapping that defines where
the node will source the data to call the function.
This only has to be used if the external names are different from the names
of the arguments of the function.</p></li>
<li><p><strong>out</strong> – The variable name the function should write it’s result to</p></li>
</ul>
</dd>
</dl>
<p>Like we stated: <cite>FuncNode</cite> is meant to operate in computational networks.
But knowing what it does will help you make the networks you want, so we commend
your curiousity, and will oblige with an explanation.</p>
<p>Say you have a function to multiply numbers.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
</pre></div>
</div>
<p>And you use it in some code like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">item_price</span> <span class="o">=</span> <span class="mf">3.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">num_of_items</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_price</span> <span class="o">=</span> <span class="n">multiply</span><span class="p">(</span><span class="n">item_price</span><span class="p">,</span> <span class="n">num_of_items</span><span class="p">)</span>
</pre></div>
</div>
<p>What the execution of <cite>total_price = multiply(item_price, num_of_items)</cite> does is
- grab the values (in the locals scope – a dict), of <code class="docutils literal notranslate"><span class="pre">item_price</span></code> and <code class="docutils literal notranslate"><span class="pre">num_of_items</span></code>,
- call the multiply function on these, and then
- write the result to a variable (in locals) named <code class="docutils literal notranslate"><span class="pre">total_price</span></code></p>
<p><cite>FuncNode</cite> is a function wrapper that specification of such a
<cite>output = function(…inputs…)</cite> assignment statement
in such a way that it can carry it out on a <cite>scope</cite>.
A <cite>scope</cite> is a <cite>dict</cite> where the function can find it’s input values and write its
output values.</p>
<p>For example, the <cite>FuncNode</cite> form of the above statement would be:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">func_node</span> <span class="o">=</span> <span class="n">FuncNode</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">func</span><span class="o">=</span><span class="n">multiply</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">bind</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="s1">&#39;item_price&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="s1">&#39;num_of_items&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_node</span>
<span class="go">FuncNode(item_price,num_of_items -&gt; multiply_ -&gt; multiply)</span>
</pre></div>
</div>
<p>Note the <cite>bind</cite> is a mapping <strong>from</strong> the variable names of the wrapped function
<strong>to</strong> the names of the scope.</p>
<p>That is, when it’s time to execute, it tells the <cite>FuncNode</cite> where to find the values
of its inputs.</p>
<p>If an input is not specified in this <cite>bind</cite> mapping, the scope
(external) name is supposed to be the same as the function’s (internal) name.</p>
<p>The purpose of a <cite>FuncNode</cite> is to source some inputs somewhere, compute something
with these, and write the result somewhere. That somewhere is what we call a
scope. A scope is a dictionary (or any mutuable mapping to be precise) and it works
like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scope</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;item_price&#39;</span><span class="p">:</span> <span class="mf">3.5</span><span class="p">,</span> <span class="s1">&#39;num_of_items&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_node</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>  <span class="c1"># see that it returns 7.0</span>
<span class="go">7.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scope</span>  <span class="c1"># but also wrote this in the scope</span>
<span class="go">{&#39;item_price&#39;: 3.5, &#39;num_of_items&#39;: 2, &#39;multiply&#39;: 7.0}</span>
</pre></div>
</div>
<p>Consider <code class="docutils literal notranslate"><span class="pre">item_price,num_of_items</span> <span class="pre">-&gt;</span> <span class="pre">multiply_</span> <span class="pre">-&gt;</span> <span class="pre">multiply</span></code>.
See that the name of the function is used for the name of its output,
and an underscore-suffixed name for its function name.
That’s the default behavior if you don’t specify either a name (of the function)
for the <cite>FuncNode</cite>, or a <cite>out</cite>.
The underscore is to distinguish from the name of the function itself.
The function gets the underscore because this favors particular naming style.</p>
<p>You can give it a custom name as well.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FuncNode</span><span class="p">(</span><span class="n">multiply</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;total_price&#39;</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="s1">&#39;daily_expense&#39;</span><span class="p">)</span>
<span class="go">FuncNode(x,y -&gt; total_price -&gt; daily_expense)</span>
</pre></div>
</div>
<p>If you give an <cite>out</cite>, but not a <cite>name</cite> (for the function), the function’s
name will be taken:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FuncNode</span><span class="p">(</span><span class="n">multiply</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="s1">&#39;daily_expense&#39;</span><span class="p">)</span>
<span class="go">FuncNode(x,y -&gt; multiply -&gt; daily_expense)</span>
</pre></div>
</div>
<p>If you give a <cite>name</cite>, but not a <cite>out</cite>, an underscore-prefixed version of
the <cite>name</cite> will be taken:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FuncNode</span><span class="p">(</span><span class="n">multiply</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;total_price&#39;</span><span class="p">)</span>
<span class="go">FuncNode(x,y -&gt; total_price -&gt; _total_price)</span>
</pre></div>
</div>
<p>Note: In the context of networks if you want to reuse a same function
(say, <cite>multiply</cite>) in multiple places
you’ll <strong>need</strong> to give it a custom name because the functions are identified by
this name in the network.</p>
<dl class="py method">
<dt class="sig sig-object py" id="meshed.dag.FuncNode.call_on_scope">
<span class="sig-name descname"><span class="pre">call_on_scope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">MutableMapping</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#FuncNode.call_on_scope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.FuncNode.call_on_scope" title="Permalink to this definition"></a></dt>
<dd><p>Call the function using the given scope both to source arguments and write
results.</p>
<p>Note: This method is only meant to be used as a backend to __call__, not as
an actual interface method. Additional control/constraints on read and writes
can be implemented by providing a custom scope for that.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="meshed.dag.FuncNode.has_as_instance">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_as_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#FuncNode.has_as_instance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.FuncNode.has_as_instance" title="Permalink to this definition"></a></dt>
<dd><p>Verify if <code class="docutils literal notranslate"><span class="pre">obj</span></code> is an instance of a FuncNode (or specific sub-class).</p>
<p>The usefulness of this method is to not have to make a lambda with isinstance
when filtering.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FuncNode</span><span class="o">.</span><span class="n">has_as_instance</span><span class="p">(</span><span class="n">FuncNode</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FuncNode</span><span class="o">.</span><span class="n">has_as_instance</span><span class="p">(</span><span class="s2">&quot;I am not a FuncNode: I&#39;m a string&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="meshed.dag.FuncNode.names_maker">
<span class="sig-name descname"><span class="pre">names_maker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#meshed.dag.FuncNode.names_maker" title="Permalink to this definition"></a></dt>
<dd><p>This name maker will resolve names in the following fashion:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>look at the (func) name and out given as arguments, if None…</p></li>
<li><p>use mk_func_name(func) to make names.</p></li>
</ol>
</div></blockquote>
<p>It will use the mk_func_name(func)  itself for out, but suffix the same with
an underscore to provide a mk_func_name.</p>
<p>This is so because here we want to allow easy construction of function networks
where a function’s output will be used as another’s input argument when
that argument has the the function’s (output) name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="meshed.dag.FuncNode.node_validator">
<span class="sig-name descname"><span class="pre">node_validator</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#meshed.dag.FuncNode.node_validator" title="Permalink to this definition"></a></dt>
<dd><p>Validates a func node. Raises ValidationError if something wrong. Returns None.</p>
<p>Validates:</p>
<ul class="simple">
<li><dl class="simple">
<dt>that the <code class="docutils literal notranslate"><span class="pre">func_node</span></code> params are valid, that is, if not <code class="docutils literal notranslate"><span class="pre">None</span></code></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">func</span></code> should be a callable</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">out</span></code> should be <code class="docutils literal notranslate"><span class="pre">str</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind</span></code> should be a <code class="docutils literal notranslate"><span class="pre">Dict[str,</span> <span class="pre">str]</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>that the names (<code class="docutils literal notranslate"><span class="pre">.name</span></code>, <code class="docutils literal notranslate"><span class="pre">.out</span></code> and all <code class="docutils literal notranslate"><span class="pre">.bind.values()</span></code>)</dt><dd><ul>
<li><p>are valid python identifiers (alphanumeric or underscore not starting with
digit)</p></li>
<li><p>are not repeated (no duplicates)</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>that <code class="docutils literal notranslate"><span class="pre">.bind.keys()</span></code> are indeed present as params of <code class="docutils literal notranslate"><span class="pre">.func</span></code></p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="meshed.dag.NameValidationError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">NameValidationError</span></span><a class="reference internal" href="../../_modules/meshed/dag.html#NameValidationError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.NameValidationError" title="Permalink to this definition"></a></dt>
<dd><p>Use to indicate that there’s a problem with a name or generating a valid name</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="meshed.dag.NotFound">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">NotFound</span></span><a class="reference internal" href="../../_modules/meshed/dag.html#NotFound"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.NotFound" title="Permalink to this definition"></a></dt>
<dd><p>To be raised when something is expected to exist, but doesn’t</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="meshed.dag.NotUniqueError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">NotUniqueError</span></span><a class="reference internal" href="../../_modules/meshed/dag.html#NotUniqueError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.NotUniqueError" title="Permalink to this definition"></a></dt>
<dd><p>Error to be raised when unicity is expected, but violated</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="meshed.dag.ValidationError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">ValidationError</span></span><a class="reference internal" href="../../_modules/meshed/dag.html#ValidationError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.ValidationError" title="Permalink to this definition"></a></dt>
<dd><p>Error that is raised when an object’s validation failed</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.basic_node_validator">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">basic_node_validator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func_node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#basic_node_validator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.basic_node_validator" title="Permalink to this definition"></a></dt>
<dd><p>Validates a func node. Raises ValidationError if something wrong. Returns None.</p>
<p>Validates:</p>
<ul class="simple">
<li><dl class="simple">
<dt>that the <code class="docutils literal notranslate"><span class="pre">func_node</span></code> params are valid, that is, if not <code class="docutils literal notranslate"><span class="pre">None</span></code></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">func</span></code> should be a callable</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">out</span></code> should be <code class="docutils literal notranslate"><span class="pre">str</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind</span></code> should be a <code class="docutils literal notranslate"><span class="pre">Dict[str,</span> <span class="pre">str]</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>that the names (<code class="docutils literal notranslate"><span class="pre">.name</span></code>, <code class="docutils literal notranslate"><span class="pre">.out</span></code> and all <code class="docutils literal notranslate"><span class="pre">.bind.values()</span></code>)</dt><dd><ul>
<li><p>are valid python identifiers (alphanumeric or underscore not starting with
digit)</p></li>
<li><p>are not repeated (no duplicates)</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>that <code class="docutils literal notranslate"><span class="pre">.bind.keys()</span></code> are indeed present as params of <code class="docutils literal notranslate"><span class="pre">.func</span></code></p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.conservative_parameter_merge">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">conservative_parameter_merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_annotation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#conservative_parameter_merge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.conservative_parameter_merge" title="Permalink to this definition"></a></dt>
<dd><p>Validates that all the params are exactly the same, returning the first if so.</p>
<p>This is used when hooking up functions that use the same parameters (i.e. arg
names). When the name of an argument is used more than once, which kind, default,
and annotation should be used in the interface of the DAG?</p>
<p>If they’re all the same, there’s no problem.</p>
<p>But if they’re not the same, we need to provide control on which to ignore.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.dot_lines_of_func_nodes">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">dot_lines_of_func_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func_nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#meshed.dag.FuncNode" title="meshed.dag.FuncNode"><span class="pre">meshed.dag.FuncNode</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#dot_lines_of_func_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.dot_lines_of_func_nodes" title="Permalink to this definition"></a></dt>
<dd><p>Got lines generator for the graphviz.DiGraph(body=list(…))</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mult</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">exp</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">mult</span> <span class="o">**</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_nodes</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;the_product&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">FuncNode</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dot_lines_of_func_nodes</span><span class="p">(</span><span class="n">func_nodes</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">lines</span> <span class="o">==</span> <span class="p">[</span>
<span class="gp">... </span><span class="s1">&#39;x [label=&quot;x&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;_add [label=&quot;_add&quot; shape=&quot;box&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;_add -&gt; x&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;a [label=&quot;a&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;b [label=&quot;b=&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;a -&gt; _add&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;b -&gt; _add&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;mult [label=&quot;mult&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;the_product [label=&quot;the_product&quot; shape=&quot;box&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;the_product -&gt; mult&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;x [label=&quot;x&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;y [label=&quot;y=&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;x -&gt; the_product&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;y -&gt; the_product&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;exp [label=&quot;exp&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;_exp [label=&quot;_exp&quot; shape=&quot;box&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;_exp -&gt; exp&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;mult [label=&quot;mult&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;a [label=&quot;a&quot; shape=&quot;none&quot;]&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;mult -&gt; _exp&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;a -&gt; _exp&#39;</span>
<span class="gp">... </span><span class="p">]</span>  
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined.util</span> <span class="kn">import</span> <span class="n">dot_to_ascii</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dot_to_ascii</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)))</span>  

<span class="go">                a        ─┐</span>
<span class="go">                          │</span>
<span class="go">           │              │</span>
<span class="go">           │              │</span>
<span class="go">           ▼              │</span>
<span class="go">         ┌─────────────┐  │</span>
<span class="go"> b=  ──▶ │    _add     │  │</span>
<span class="go">         └─────────────┘  │</span>
<span class="go">           │              │</span>
<span class="go">           │              │</span>
<span class="go">           ▼              │</span>
<span class="go">                          │</span>
<span class="go">                x         │</span>
<span class="go">                          │</span>
<span class="go">           │              │</span>
<span class="go">           │              │</span>
<span class="go">           ▼              │</span>
<span class="go">         ┌─────────────┐  │</span>
<span class="go"> y=  ──▶ │ the_product │  │</span>
<span class="go">         └─────────────┘  │</span>
<span class="go">           │              │</span>
<span class="go">           │              │</span>
<span class="go">           ▼              │</span>
<span class="go">                          │</span>
<span class="go">              mult        │</span>
<span class="go">                          │</span>
<span class="go">           │              │</span>
<span class="go">           │              │</span>
<span class="go">           ▼              │</span>
<span class="go">         ┌─────────────┐  │</span>
<span class="go">         │    _exp     │ ◀┘</span>
<span class="go">         └─────────────┘</span>
<span class="go">           │</span>
<span class="go">           │</span>
<span class="go">           ▼</span>

<span class="go">               exp</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.extract_items">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">extract_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#extract_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.extract_items" title="Permalink to this definition"></a></dt>
<dd><p>generator of (k, v) pairs extracted from d for keys</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.extract_values">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">extract_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#extract_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.extract_values" title="Permalink to this definition"></a></dt>
<dd><p>Extract values from dict <code class="docutils literal notranslate"><span class="pre">d</span></code>, returning them:</p>
<ul class="simple">
<li><p>as a tuple if len(keys) &gt; 1</p></li>
<li><p>a single value if len(keys) == 1</p></li>
<li><p>None if not</p></li>
</ul>
<p>This is used as the default extractor in DAG</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.funcs_to_operations">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">funcs_to_operations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">funcs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="ext/gk.html#meshed.ext.gk.Operation" title="meshed.ext.gk.Operation"><span class="pre">meshed.ext.gk.Operation</span></a></span></span><a class="reference internal" href="../../_modules/meshed/dag.html#funcs_to_operations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.funcs_to_operations" title="Permalink to this definition"></a></dt>
<dd><p>Get an operation from a callable</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.funcs_to_operators">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">funcs_to_operators</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">funcs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="ext/gk.html#meshed.ext.gk.Operation" title="meshed.ext.gk.Operation"><span class="pre">meshed.ext.gk.Operation</span></a></span></span><a class="reference internal" href="../../_modules/meshed/dag.html#funcs_to_operators"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.funcs_to_operators" title="Permalink to this definition"></a></dt>
<dd><p>Get an operation from a callable</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.hook_up">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">hook_up</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">MutableMapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#hook_up"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.hook_up" title="Permalink to this definition"></a></dt>
<dd><p>Source inputs and write outputs to given variables mapping.</p>
<p>Returns inputless and outputless function that will, when called,
get relevant inputs from the provided variables mapping and write it’s
output there as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>variables</strong> – The MutableMapping (like… a dict) where the function</p>
</dd>
</dl>
<p>should both read it’s input and write it’s output.
:param output_name: The key of the variables mapping that should be used
to write the output of the function
:return: A function</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">formula1</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">((</span><span class="n">w</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span> <span class="o">**</span> <span class="n">z</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">hook_up</span><span class="p">(</span><span class="n">formula1</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># NOTE: update d, not d = dict(...), which would make a DIFFERENT d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># not d = dict(w=2, x=3, y=4), which would</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that there’s no output. The output is in d
&gt;&gt;&gt; d
{‘w’: 2, ‘x’: 3, ‘y’: 4, ‘formula1’: 20}</p>
<p>Again…</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;formula1&#39;</span><span class="p">]</span>
<span class="go">9</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.is_func_node">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">is_func_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/meshed/dag.html#is_func_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.is_func_node" title="Permalink to this definition"></a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">is_func_node</span><span class="p">(</span><span class="n">FuncNode</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_func_node</span><span class="p">(</span><span class="s2">&quot;I am not a FuncNode: I&#39;m a string&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.is_not_func_node">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">is_not_func_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/meshed/dag.html#is_not_func_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.is_not_func_node" title="Permalink to this definition"></a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">is_not_func_node</span><span class="p">(</span><span class="n">FuncNode</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_not_func_node</span><span class="p">(</span><span class="s2">&quot;I am not a FuncNode: I&#39;m a string&quot;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.named_partial">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">named_partial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__name__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">keywords</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#named_partial"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.named_partial" title="Permalink to this definition"></a></dt>
<dd><p>functools.partial, but with a __name__</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">named_partial</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;print&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">named_partial</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="o">=</span><span class="s1">&#39;now_partial_has_a_name&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;now_partial_has_a_name&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.underscore_func_node_names_maker">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">underscore_func_node_names_maker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#underscore_func_node_names_maker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.underscore_func_node_names_maker" title="Permalink to this definition"></a></dt>
<dd><p>This name maker will resolve names in the following fashion:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>look at the (func) name and out given as arguments, if None…</p></li>
<li><p>use mk_func_name(func) to make names.</p></li>
</ol>
</div></blockquote>
<p>It will use the mk_func_name(func)  itself for out, but suffix the same with
an underscore to provide a mk_func_name.</p>
<p>This is so because here we want to allow easy construction of function networks
where a function’s output will be used as another’s input argument when
that argument has the the function’s (output) name.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="meshed.dag.validate_that_func_node_names_are_sane">
<span class="sig-prename descclassname"><span class="pre">meshed.dag.</span></span><span class="sig-name descname"><span class="pre">validate_that_func_node_names_are_sane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func_nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#meshed.dag.FuncNode" title="meshed.dag.FuncNode"><span class="pre">meshed.dag.FuncNode</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/meshed/dag.html#validate_that_func_node_names_are_sane"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#meshed.dag.validate_that_func_node_names_are_sane" title="Permalink to this definition"></a></dt>
<dd><p>Assert that the names of func_nodes are sane.
That is:</p>
<ul class="simple">
<li><p>are valid dot (graphviz) names (we’ll use str.isidentifier because lazy)</p></li>
<li><p>All the <code class="docutils literal notranslate"><span class="pre">func.name</span></code> and <code class="docutils literal notranslate"><span class="pre">func.out</span></code> are unique</p></li>
<li><p>more to come (TODO)…</p></li>
</ul>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="caching.html" class="btn btn-neutral float-left" title="meshed.caching" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples/online_marketing.html" class="btn btn-neutral float-right" title="meshed.examples.online_marketing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>